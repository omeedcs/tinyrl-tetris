#pragma once
#include <cstdint>

namespace Tetris {
    // Piece shapes: [piece_type][rotation][row][col]
    // 7 pieces × 4 rotations × 4 rows × 4 cols
    // Using SRS (Super Rotation System) standard
    // Each piece array: row 0 = top, row 3 = bottom
    constexpr uint8_t PIECES[7][4][4][4] = {
        // I-piece
        {
            {{0,0,0,0}, {1,1,1,1}, {0,0,0,0}, {0,0,0,0}},  // rot 0: horizontal
            {{0,0,1,0}, {0,0,1,0}, {0,0,1,0}, {0,0,1,0}},  // rot 1: vertical
            {{0,0,0,0}, {1,1,1,1}, {0,0,0,0}, {0,0,0,0}},  // rot 2: horizontal
            {{0,0,1,0}, {0,0,1,0}, {0,0,1,0}, {0,0,1,0}}   // rot 3: vertical
        },
        // O-piece (doesn't rotate)
        {
            {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}},
            {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}},
            {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}},
            {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}}
        },
        // T-piece
        {
            {{0,1,0,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}},  // rot 0: pointing up
            {{0,1,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}},  // rot 1: pointing left (CW from up)
            {{0,0,0,0}, {1,1,1,0}, {0,1,0,0}, {0,0,0,0}},  // rot 2: pointing down (CW from left)
            {{0,1,0,0}, {0,1,1,0}, {0,1,0,0}, {0,0,0,0}}   // rot 3: pointing right (CW from down)
        },
        // S-piece
        {
            {{0,1,1,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}},  // rot 0: horizontal
            {{1,0,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}},  // rot 1: vertical (CW from horizontal)
            {{0,1,1,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}},  // rot 2: horizontal
            {{1,0,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}}   // rot 3: vertical
        },
        // Z-piece
        {
            {{1,1,0,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}},  // rot 0: horizontal
            {{0,1,0,0}, {1,1,0,0}, {1,0,0,0}, {0,0,0,0}},  // rot 1: vertical (CW from horizontal)
            {{1,1,0,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}},  // rot 2: horizontal
            {{0,1,0,0}, {1,1,0,0}, {1,0,0,0}, {0,0,0,0}}   // rot 3: vertical
        },
        // J-piece
        {
            {{1,0,0,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}},  // rot 0
            {{0,1,0,0}, {0,1,0,0}, {1,1,0,0}, {0,0,0,0}},  // rot 1: CW
            {{0,0,0,0}, {1,1,1,0}, {0,0,1,0}, {0,0,0,0}},  // rot 2: CW
            {{0,1,1,0}, {0,1,0,0}, {0,1,0,0}, {0,0,0,0}}   // rot 3: CW
        },
        // L-piece
        {
            {{0,0,1,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}},  // rot 0
            {{1,1,0,0}, {0,1,0,0}, {0,1,0,0}, {0,0,0,0}},  // rot 1: CW
            {{0,0,0,0}, {1,1,1,0}, {1,0,0,0}, {0,0,0,0}},  // rot 2: CW
            {{0,1,0,0}, {0,1,0,0}, {0,1,1,0}, {0,0,0,0}}   // rot 3: CW
        }
    };
}
